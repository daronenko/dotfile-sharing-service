<%= render 'layouts/header' %>
<div class="container d-flex justify-content-center mt-5" style="width: 100%; weight: 100%">
  <div style="width: 70%">
      <h1>Bookmarks</h1><br>
      
      <% if defined?(notice) && (not notice.nil?) %>
        <div class="alert alert-success" role="alert">
          <%= notice %>
        </div>
        <br>
      <% end %>
      
      <div class="form-inline">
        <%= search_form_for @q do |f| %>
          <div>
            <%= f.label :title_or_description_or_config_type_or_user_username_cont, 'Search', class: 'sr-only' %>
            <%= f.search_field :title_or_description_or_config_type_or_user_username_cont,
              class: 'form-control',
              autofocus: true,
              autocomplete: 'off',
              placeholder: 'Search for Bookmarks' %>
          </div>

          <div class="mt-3">
            <%= f.label :config_type_eq, 'Config Type', class: 'sr-only' %>
            <%= f.select :config_type_eq,
              Dotfile.pluck(:config_type).uniq,
              { include_blank: true },
              class: 'form-select',
              style: 'width: 200px;',
              onchange: 'this.form.submit();'
            %>
          </div>

          <%= f.submit 'Search', class: 'btn btn-primary mt-3' %>
        <% end %>
      </div>

      <br>
      
      <div id="dotfiles">
        <% @dotfiles.each do |dotfile| %>
          <div class="mt-3">
            <% if current_user.voted_up_on? dotfile, vote_scope: "bookmark" %>
              <%= render dotfile %>
            <% end %>
          </div>
        <% end %>
      </div>

      <% if @pagy.count > @pagy.items %>
        <div class="d-flex justify-content-center mt-5" style="width: 100%; weight: 100%">
          <%== pagy_bootstrap_nav(@pagy) %>
        </div>
      <% end %> 
  </div>
</div>
